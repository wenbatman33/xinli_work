(window.webpackJsonp=window.webpackJsonp||[]).push([["exchange"],{1899:function(e,t,s){"use strict";(function(e){s("8e6e"),s("ac6a"),s("456d"),s("c5f6");var a=s("bd86"),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}t.a={data:function(){var e;return e={exchangeForm:{phone:""},exchangeFormRules:{phone:[{required:!1,type:"number",message:"请输手机号",trigger:"blur"},{validator:function(e,t,s){""===t?s(new Error("请输手机号")):/^(13|14|15|16|17|18|19)\d{9}$/.test(t)?s():s(new Error("请输入正确的手机号"))},trigger:"change"}],address:[{required:!1,message:"请输入正确的收货地址",trigger:"change"}]},CART:[],phoneRadio:1},Object(a.a)(e,"exchangeForm",{phone:"",address:"",note:""}),Object(a.a)(e,"needsPhone",!1),Object(a.a)(e,"needsAddress",!1),e},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(a.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(o.b)("shopping",["goodsCartList"]),{},Object(o.b)("wallet",["memberWallet"]),{},Object(o.b)("member",["memberStatus","PersonalDetail"]),{shoppingPoint:function(){var e=0;return this.$store.state.shopping.goodsCartList.map((function(t){e+=t.point*t.quantity})),e}}),methods:{deleteGood:function(e){var t=this.goodsCartList;t.splice(e,1),this.$store.commit("shopping/setGoodsCartList",t)},submit:function(t){var s=this;this.$refs[t].validate((function(t){if(t){var a={goods:[],note:s.exchangeForm.note,phone:1===s.phoneRadio?s.memberStatus.phone:s.exchangeForm.phone,address:s.PersonalDetail.memberFullAddress};s.$store.state.shopping.goodsCartList.map((function(e){a.goods.push({goods_id:e.goods_id,quantity:e.quantity})})),e.post("/api/Goods/Exchange",a).then((function(e){window.localStorage.removeItem("CART_".concat(window.localStorage.LC_API_ID)),window.localStorage.removeItem("CARTTIME"),s.$store.commit("shopping/setGoodsCartList",[]),s.$store.dispatch("wallet/getMemberWallet"),s.$router.push({path:"/oder"})}))}}))}},mounted:function(){var e=this;this.exchangeForm.address=this.PersonalDetail.memberFullAddress,this.goodsCartList.map((function(t){1===t.type&&(e.needsAddress=!0,e.exchangeFormRules.address.required=!0),1===t.category&&(e.needsPhone=!0,e.exchangeFormRules.phone.required=!0)})),this.memberStatus.phone&&(this.exchangeForm.phone=Number(this.memberStatus.phone)),this.memberStatus.phoene||(this.phoneRadio=2),this.$store.dispatch("shopping/checkGoodsCartList")}}}).call(this,s("bc3a"))},"8c30":function(e,t,s){},"9bd8":function(e,t,s){"use strict";var a=s("8c30");s.n(a).a},faa3:function(e,t,s){"use strict";s.r(t);var a=s("1899").a,o=(s("9bd8"),s("2877")),r=Object(o.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"container goodCartWarp mb-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 my-3"},[s("div",{staticClass:"DWBreadcrumb"},[s("router-link",{attrs:{to:"/"}},[e._v("首页")]),s("span",{staticClass:"mx-2"},[e._v("/")]),s("router-link",{attrs:{to:"/cart"}},[e._v("购物车订单")]),s("span",{staticClass:"mx-2"},[e._v("/")]),s("span",[e._v("收货信息")])],1)])]),s("div",{staticClass:"goodCartTitle text-white"},[e._v("订单总结")]),s("hr"),s("div",{staticClass:"shoppingPoint"},[s("p",{staticClass:"text-white text-right"}),s("h6",{staticClass:"text-white mr-5"},[e._v("合计: "+e._s(e._f("commaFormatDefault")(e.shoppingPoint))+" ")]),s("p"),s("hr"),s("p",{staticClass:"text-white text-right"})]),s("div",{staticClass:"goodCartTitle text-white"},[e._v("订单信息")]),s("div",{staticClass:"exchangeFormDIV"},[s("el-form",{ref:"exchangeFormREF",attrs:{model:e.exchangeForm,rules:e.exchangeFormRules},nativeOn:{submit:function(t){return t.preventDefault(),e.submit("exchangeFormREF")}}},[e.needsPhone?s("p",{staticClass:"my-2"},[s("el-radio",{attrs:{label:2},model:{value:e.phoneRadio,callback:function(t){e.phoneRadio=t},expression:"phoneRadio"}},[s("span",[s("span",{staticClass:"text-white my-2"},[e._v("请输入联系手机号")]),s("span",[s("el-form-item",{attrs:{prop:"phone"}},[s("el-input",{attrs:{label:"手机号：",disabled:1===e.phoneRadio,type:"tel",maxlength:"11",placeholder:"请输入联系手机号"},model:{value:e.exchangeForm.phone,callback:function(t){e.$set(e.exchangeForm,"phone",e._n(t))},expression:"exchangeForm.phone"}})],1)],1)])])],1):e._e(),e.needsAddress?s("div",{staticClass:"my-2 d-flex flex-row"},[s("div",{staticClass:"inputTite text-white"},[e._v("收货地址:")]),s("el-form-item",{staticClass:"w-100",attrs:{prop:"address"}},[s("el-input",{staticClass:"w-100",attrs:{label:"收货地址"},model:{value:e.exchangeForm.address,callback:function(t){e.$set(e.exchangeForm,"address",t)},expression:"exchangeForm.address"}})],1)],1):e._e(),s("div",{staticClass:"my-2 d-flex flex-row"},[s("div",{staticClass:"inputTite text-white"},[e._v("备注:")]),s("el-form-item",{staticClass:"w-100",attrs:{prop:"note"}},[s("el-input",{attrs:{label:"备注"},model:{value:e.exchangeForm.note,callback:function(t){e.$set(e.exchangeForm,"note",t)},expression:"exchangeForm.note"}})],1)],1),s("hr"),s("p",{staticClass:"text-right"},[s("el-button",{attrs:{disabled:e.memberWallet.point-e.shoppingPoint<0,type:"primary"},on:{click:function(t){return e.submit("exchangeFormREF")}}},[e._v("提交订单")])],1)])],1)])])}),[],!1,null,"196e0865",null);t.default=r.exports}}]);
//# sourceMappingURL=exchange.73e03b76.js.map